!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Chart"),require("BigNumber")):"function"==typeof define&&define.amd?define("ZapCurveChart",["Chart","BigNumber"],e):"object"==typeof exports?exports.ZapCurveChart=e(require("Chart"),require("BigNumber")):t.ZapCurveChart=e(t.Chart,t.BigNumber)}(window,function(t,e){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=2)}([function(e,r){e.exports=t},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(5);e.Curve=class{constructor(t=[]){this.max=0,this.values=t,this.checkValidity()}checkValidity(){for(var t=1,e=0;e<this.values.length;){var r=this.values[e];if(r<=0)throw"Invalid curve length";var i=e+r+1;if(i>=this.values.length)throw"Piece is out of bounds";var a=this.values[i];if(a<=t)throw"Piece domains are overlapping";t=a,e+=r+2}this.max=t}getPrice(t){if(t<=0||t>this.max)throw"Invalid curve supply position";if(!this.values)throw"Curve is not initialized";for(var e=0;e<this.values.length;){var r=this.values[e];if(!(t>this.values[e+r+1])){for(var i=0,a=0;a<r;a++)i+=this.values[e+a+1]*Math.pow(t,a);return i}e+=r+2}return-1}getZapRequired(t,e){for(var r=0,i=t;i<t+e;i++)r+=this.getPrice(i);return r}convertToBNArrays(){return this.values.map(t=>new i.BigNumber(t))}valuesToString(){return this.values.map(t=>""+t)}}},function(t,e,r){t.exports=r(3)},function(t,e,r){"use strict";function i(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),i(r(4)),i(r(7))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),a=r(1),n=r(6),s=function(){function t(t,e){void 0===e&&(e={height:150,width:300}),this.chart=null,this.chartDatasets=[],this.chartLabels=[],this.canvas=null,this.maxDots=e.maxDots||300,this.canvas=document.createElement("canvas"),e.hasOwnProperty("height")&&(this.canvas.style.height=e.height+"px"),e.hasOwnProperty("width")&&(this.canvas.style.width=e.width+"px"),t.appendChild(this.canvas);var r=i.controllers.line.prototype.initialize;i.controllers.line.prototype.initialize=function(){r.apply(this,arguments);var t=this.chart.chart.ctx,e=t.stroke;t.stroke=function(){t.save(),t.shadowColor="#07C",t.shadowBlur=10,t.shadowRadius=10,t.shadowOffsetX=0,t.shadowOffsetY=0,e.apply(this,arguments),t.restore()}}}return t.prototype.destroy=function(){this.chart&&this.chart.destroy()},t.prototype.getDataset=function(t){var e=new a.Curve(t);return n.reduce(e.max,this.maxDots).map(function(t){return{x:t,y:e.getPrice(t)/1e18}})},t.prototype.draw=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.getDataset(t);this.chartLabels=r.map(function(t){return t.x});var i={pointRadius:[],pointBorderWidth:[],pointBackgroundColor:[],pointBorderColor:[]};r.forEach(function(t,a){var n=!!r[a-1]&&r[a-1].x<e&&t.x>=e;i.pointRadius.push(n?5:0),i.pointBorderWidth.push(n?3:0)}),this.chartDatasets=[{label:"",data:r.map(function(t){return t.y}),fill:!0,fillOpacity:1,pointBackgroundColor:"rgba(0,120,254,1)",pointBorderColor:"rgba(0,120,254,1)",pointStyle:"circle",borderColor:"rgba(0,120,254,0.75)",backgroundColor:"rgba(0,120,254,0.5)",lineTension:.1,pointRadius:i.pointRadius,pointBorderWidth:i.pointBorderWidth,borderWidth:2}],this.chart||this.renderChart(),this.updateChart()},t.prototype.renderChart=function(){this.chart&&this.chart.destroy(),this.chart=new i(this.canvas.getContext("2d"),{type:"line",options:{elements:{line:{tension:0}},animation:{duration:0},layout:{padding:{top:7,bottom:0,left:-10}},responsive:!1,maintainAspectRatio:!1,tooltips:{enabled:!0,intersect:!1,mode:"index"},legend:{display:!1},scales:{xAxes:[{ticks:{display:!1,minRotation:0,padding:5},gridLines:{drawBorder:!1,zeroLineWidth:0,display:!1,drawTicks:!1},scaleLabel:{display:!1,labelString:"Dot number"}}],yAxes:[{ticks:{display:!1,beginAtZero:!0},gridLines:{drawBorder:!1,zeroLineWidth:0,display:!1,drawTicks:!0},scaleLabel:{display:!1,labelString:"Dot price"}}]}},data:{datasets:[],labels:[]}})},t.prototype.updateChart=function(){if(this.chart){this.chart.data.datasets=this.chartDatasets,this.chart.data.labels=this.chartLabels;var t=2*Math.max.apply(Math,this.chartDatasets[0].data);this.chart.options.scales.yAxes[0].ticks.max=t;var e=Math.min.apply(Math,this.chartLabels);this.chart.options.scales.xAxes[0].ticks.min=e,this.chart.update()}},t}();e.CurveLineChart=s},function(t,r){t.exports=e},function(t,e,r){"use strict";function i(t,e){return Math.round((t+e)/2)}Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=function(t,e){if(t<=e){for(var r=[],a=1;a<=t;a++)r.push(a);return r}var n=t/(e-2),s=[1];s.push(i(1,n)),a=n;for(var o=t-n;a<o;)s.push(i(a,a+=n));return s.push(i(t-n,t)),s.push(t),s},e.average=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),a=r(1);r(8);var n=function(){function t(t,e){void 0===e&&(e={height:150,width:150}),this.chart=null,this.chartDatasets=[],this.chartLabels=[],this.makeHTML(t,e)}return t.prototype.destroy=function(){this.chart&&this.chart.destroy()},t.prototype.makeHTML=function(t,e){this.canvas=document.createElement("canvas"),e.hasOwnProperty("height")&&(this.canvas.style.height=e.height+"px"),e.hasOwnProperty("width")&&(this.canvas.style.width=e.width+"px"),this.issuedDotsContainer=document.createElement("div"),this.issuedDotsContainer.classList.add("curve-doughnut-chart__issued-dots-container"),this.issuedDotsContainer.setAttribute("title","Issued dots"),this.userDotsContainer=document.createElement("div"),this.userDotsContainer.classList.add("curve-doughnut-chart__user-dots-container"),this.userDotsContainer.setAttribute("title","User's dot balance"),this.dotPriceContainer=document.createElement("div"),this.dotPriceContainer.classList.add("curve-doughnut-chart__dot-price-container"),this.dotPriceContainer.setAttribute("title","Current price of dot"),this.chartContainer=document.createElement("div"),this.chartContainer.classList.add("curve-doughnut-chart"),this.chartContainer.appendChild(this.userDotsContainer),this.chartContainer.appendChild(this.canvas),this.chartContainer.appendChild(this.issuedDotsContainer),this.chartContainer.appendChild(this.dotPriceContainer),t.appendChild(this.chartContainer)},t.prototype.draw=function(t,e,r){void 0===e&&(e=0);var i=new a.Curve(t),n=i.max,s=i.getPrice(e+1);this.dotPriceContainer.textContent=s.toString(),this.userDotsContainer.textContent=r.toString(),this.issuedDotsContainer.textContent=e.toString(),this.chartLabels=["Issued dots","Available dots"],this.chartDatasets=[{backgroundColor:["rgba(0,120,254,0.5)","#e5e5e5"],data:[e,n-e]}],this.chart||this.renderChart(),this.updateChart()},t.prototype.updateChart=function(){this.chart&&(this.chart.data.datasets=this.chartDatasets,this.chart.data.labels=this.chartLabels,this.chart.update())},t.prototype.renderChart=function(){this.chart&&this.chart.destroy(),this.chart=new i(this.canvas.getContext("2d"),{type:"doughnut",options:{animation:{duration:0},layout:{padding:{top:7,bottom:0,left:-10}},responsive:!1,maintainAspectRatio:!1,tooltips:{enabled:!0,intersect:!1,mode:"index"},legend:{display:!1}},data:{datasets:[],labels:[]}})},t}();e.CurveDoughnutChart=n},function(t,e,r){}])});