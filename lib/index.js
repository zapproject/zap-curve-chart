!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Chart"),require("Curve")):"function"==typeof define&&define.amd?define("ZapCurve",["Chart","Curve"],e):"object"==typeof exports?exports.ZapCurve=e(require("Chart"),require("Curve")):t.ZapCurve=e(t.Chart,t.Curve)}(window,function(t,e){return function(t){var e={};function a(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(r,i,function(e){return t[e]}.bind(null,i));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=2)}([function(e,a){e.exports=t},function(t,a){t.exports=e},function(t,e,a){t.exports=a(4)},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var r=a(0),i=a.n(r),s=a(1);class n{constructor(t,e={height:150,width:300}){this.chart=null,this.chartDatasets=[],this.chartLabels=[],this.canvas=null,this.canvas=document.createElement("canvas"),e.hasOwnProperty("height")&&(this.canvas.style.height=e.height+"px"),e.hasOwnProperty("width")&&(this.canvas.style.width=e.width+"px"),t.appendChild(this.canvas);const a=i.a.controllers.line.prototype.initialize;i.a.controllers.line.prototype.initialize=function(){a.apply(this,arguments);const t=this.chart.chart.ctx,e=t.stroke;t.stroke=function(){t.save(),t.shadowColor="#07C",t.shadowBlur=10,t.shadowRadius=10,t.shadowOffsetX=0,t.shadowOffsetY=0,e.apply(this,arguments),t.restore()}}}destroy(){this.chart&&this.chart.destroy()}getDataset(t,e){const a=new s.Curve(t),r=[],i=Math.max(e-50,1),n=Math.min(i+100,a.max);for(let t=i;t<n;t++)r.push([t,a.getPrice(t)/1e18]);return r}draw(t=[],e=0){const a=this.getDataset(t,e);this.chartLabels=a.map(t=>t[0]);const r={pointRadius:[],pointBorderWidth:[],pointBackgroundColor:[],pointBorderColor:[]};a.forEach((t,a)=>{const i=a===e;r.pointRadius.push(i?5:0),r.pointBorderWidth.push(i?3:0)}),this.chartDatasets=[{label:"",data:a.map(t=>t[1]),fill:!0,fillOpacity:1,pointBackgroundColor:"rgba(0,120,254,1)",pointBorderColor:"rgba(0,120,254,1)",pointStyle:"circle",borderColor:"rgba(0,120,254,0.75)",backgroundColor:"rgba(0,120,254,0.5)",lineTension:.1,pointRadius:r.pointRadius,pointBorderWidth:r.pointBorderWidth,borderWidth:2}],this.chart||this.renderChart(),this.updateChart()}renderChart(){this.chart&&this.chart.destroy(),this.chart=new i.a(this.canvas.getContext("2d"),{type:"line",options:{animation:{duration:0},layout:{padding:{top:7,bottom:0,left:-10}},responsive:!1,maintainAspectRatio:!1,tooltips:{enabled:!0,intersect:!1,mode:"index"},legend:{display:!1},scales:{xAxes:[{ticks:{display:!1,minRotation:0,padding:5},gridLines:{drawBorder:!1,zeroLineWidth:0,display:!1,drawTicks:!1},scaleLabel:{display:!1,labelString:"Dot number"}}],yAxes:[{ticks:{display:!1,beginAtZero:!0},gridLines:{drawBorder:!1,zeroLineWidth:0,display:!1,drawTicks:!0},scaleLabel:{display:!1,labelString:"Dot price"}}]}},data:{datasets:[],labels:[]}})}updateChart(){if(!this.chart)return;this.chart.data.datasets=this.chartDatasets,this.chart.data.labels=this.chartLabels;const t=2*Math.max(...this.chartDatasets[0].data);this.chart.options.scales.yAxes[0].ticks.max=t;const e=Math.min(...this.chartLabels);this.chart.options.scales.xAxes[0].ticks.min=e,this.chart.update()}}a(3);class o{constructor(t,e={height:150,width:150}){this.chart=null,this.chartDatasets=[],this.chartLabels=[],this.makeHTML(t,e)}destroy(){this.chart&&this.chart.destroy()}makeHTML(t,e){this.canvas=document.createElement("canvas"),e.hasOwnProperty("height")&&(this.canvas.style.height=e.height+"px"),e.hasOwnProperty("width")&&(this.canvas.style.width=e.width+"px"),this.issuedDotsContainer=document.createElement("div"),this.issuedDotsContainer.classList.add("curve-doughnut-chart__issued-dots-container"),this.issuedDotsContainer.setAttribute("title","Issued dots"),this.userDotsContainer=document.createElement("div"),this.userDotsContainer.classList.add("curve-doughnut-chart__user-dots-container"),this.userDotsContainer.setAttribute("title","User's dot balance"),this.dotPriceContainer=document.createElement("div"),this.dotPriceContainer.classList.add("curve-doughnut-chart__dot-price-container"),this.dotPriceContainer.setAttribute("title","Current price of dot"),this.chartContainer=document.createElement("div"),this.chartContainer.classList.add("curve-doughnut-chart"),this.chartContainer.appendChild(this.userDotsContainer),this.chartContainer.appendChild(this.canvas),this.chartContainer.appendChild(this.issuedDotsContainer),this.chartContainer.appendChild(this.dotPriceContainer),t.appendChild(this.chartContainer)}draw(t,e=0,a){const r=new s.Curve(t),i=r.max,n=r.getPrice(e+1);this.dotPriceContainer.textContent=n.toString(),this.userDotsContainer.textContent=a.toString(),this.issuedDotsContainer.textContent=e.toString(),this.chartLabels=["Issued dots","Available dots"],this.chartDatasets=[{backgroundColor:["rgba(0,120,254,0.5)","#e5e5e5"],data:[e,i-e]}],this.chart||this.renderChart(),this.updateChart()}updateChart(){this.chart&&(this.chart.data.datasets=this.chartDatasets,this.chart.data.labels=this.chartLabels,this.chart.update())}renderChart(){this.chart&&this.chart.destroy(),this.chart=new i.a(this.canvas.getContext("2d"),{type:"doughnut",options:{animation:{duration:0},layout:{padding:{top:7,bottom:0,left:-10}},responsive:!1,maintainAspectRatio:!1,tooltips:{enabled:!0,intersect:!1,mode:"index"},legend:{display:!1}},data:{datasets:[],labels:[]}})}}a.d(e,"CurveLineChart",function(){return n}),a.d(e,"CurveDoughnutChart",function(){return o})}])});