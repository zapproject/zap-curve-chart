!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("bignumber.js")):"function"==typeof define&&define.amd?define("ZapCurveChart",["bignumber.js"],e):"object"==typeof exports?exports.ZapCurveChart=e(require("bignumber.js")):t.ZapCurveChart=e(t.BigNumber)}(window,function(t){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=10)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(1);e.Curve=class{constructor(t=[]){this.max=0,this.values=t,this.checkValidity()}checkValidity(){for(var t=1,e=0;e<this.values.length;){var i=this.values[e];if(i<=0)throw"Invalid curve length";var r=e+i+1;if(r>=this.values.length)throw"Piece is out of bounds";var s=this.values[r];if(s<=t)throw"Piece domains are overlapping";t=s,e+=i+2}this.max=t}getPrice(t){if(t<=0||t>this.max)throw"Invalid curve supply position";if(!this.values)throw"Curve is not initialized";for(var e=0;e<this.values.length;){var i=this.values[e];if(!(t>this.values[e+i+1])){for(var r=0,s=0;s<i;s++)r+=this.values[e+s+1]*Math.pow(t,s);return r}e+=i+2}return-1}getZapRequired(t,e){for(var i=0,r=t;r<t+e;r++)i+=this.getPrice(r);return i}convertToBNArrays(){return this.values.map(t=>new r.BigNumber(t))}valuesToString(){return this.values.map(t=>""+t)}}},function(e,i){e.exports=t},,function(t,e,i){"use strict";function r(t,e){return Math.round((t+e)/2)}Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=function(t,e){var i=[];if(t<=e){for(var s=1;s<=t;s++)i.push(s);return i}var n=t/(e-2);i.push(1),i.push(r(1,n)),s=n;for(var o=t-n;s<o;)i.push(r(s,s+=n));return i.push(r(t-n,t)),i.push(t),i},e.average=r},,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=i(3),n=function(){function t(t,e,i){void 0===e&&(e={height:150,width:300}),void 0===i&&(i={}),this.container=t,this.options=e,this.coef=1,this.textColor="#fff",this.textBackground="rgba(0, 0, 0, .7)",this.lineOptions={fill:!0,borderWidth:2,borderColor:"rgba(0,120,254,0.75)",backgroundColor:"rgba(0,120,254,0.5)",currentPointRadius:7,currentPointBackgroundColor:"rgba(0,120,254,1)"},this.shadowRadius="3",this.black=!1,this.maxDots=e.maxDots||300,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.lineOptions=Object.assign(this.lineOptions,i),this.coef=1;var r=e.height,s=e.width;this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttributeNS(null,"viewBox","0 -"+r/2+" "+s+" "+r);var n=document.createElementNS("http://www.w3.org/2000/svg","defs"),o=this.getFilter("circleShadow",{x:"0",y:"0"});n.append(o);var l=this.getFilter("polylineShadow",{x:"0",y:"-1"});n.append(l),this.svg.append(n),this.polyline=document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.polyline.setAttributeNS(null,"stroke",this.lineOptions.borderColor),this.polyline.setAttributeNS(null,"fill","none"),this.polyline.setAttributeNS(null,"stroke-width",this.lineOptions.borderWidth.toString()),this.polyline.setAttributeNS(null,"filter","url(#polylineShadow)"),this.fill=document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.fill.setAttributeNS(null,"stroke","none"),this.fill.setAttributeNS(null,"fill",this.lineOptions.backgroundColor),this.fill.setAttributeNS(null,"stroke-width",this.lineOptions.borderWidth.toString()),this.gCircle=document.createElementNS("http://www.w3.org/2000/svg","g"),this.circle=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.circle.setAttributeNS(null,"r",this.lineOptions.currentPointRadius.toString()),this.circle.setAttributeNS(null,"fill",this.lineOptions.currentPointBackgroundColor),this.circle.setAttributeNS(null,"filter","url(#circleShadow)"),this.gCircle.appendChild(this.circle),this.gText=document.createElementNS("http://www.w3.org/2000/svg","g"),this.gText.setAttributeNS(null,"font-size","12"),this.gText.setAttributeNS(null,"font-family","sans-serif"),this.gText.setAttributeNS(null,"stroke","none"),this.gText.setAttributeNS(null,"text-anchor","start"),this.gText.setAttributeNS(null,"fill",this.textColor),this.textM=document.createElementNS("http://www.w3.org/2000/svg","text"),this.textMDots=document.createElementNS("http://www.w3.org/2000/svg","tspan"),this.textMDots.setAttributeNS(null,"dy","1em"),this.textMPrice=document.createElementNS("http://www.w3.org/2000/svg","tspan"),this.textMPrice.setAttributeNS(null,"dy","1em"),this.textM.appendChild(this.textMDots),this.textM.appendChild(this.textMPrice),this.textM.style.visibility="hidden",this.infoText=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.infoText.setAttributeNS(null,"ry","5"),this.infoText.setAttributeNS(null,"rx","5"),this.infoText.setAttributeNS(null,"fill",this.textBackground),this.gText.appendChild(this.textM),this.svg.appendChild(this.fill),this.svg.appendChild(this.polyline),this.svg.appendChild(this.gCircle),this.svg.appendChild(this.infoText),this.svg.appendChild(this.gText),this.svg.style.height=e.height+"px",this.svg.style.width=e.width+"px",this.container.appendChild(this.svg),this.svg.addEventListener("mousemove",this.onMouseMove),this.svg.addEventListener("mouseout",this.onMouseOut)}return t.prototype.draw=function(t,e){var i=this.getDataset(t,e);this.polyline.setAttributeNS(null,"points",i.polyline),this.fill.setAttributeNS(null,"points",i.fill),this.circle.setAttributeNS(null,"cx",i.currentPos.x>3?i.currentPos.x:3),this.circle.setAttributeNS(null,"cy",i.currentPos.y),this.coef=i.curve.max/this.options.width,this.curve=i.curve},t.prototype.destroy=function(){this.svg.removeEventListener("mousemove",this.onMouseMove),this.svg.removeEventListener("mouseout",this.onMouseOut),this.container.removeChild(this.svg)},t.prototype.onMouseMove=function(t){if(this.curve){this.textM.style.visibility="visible",this.infoText.style.visibility="visible";var e=this.polyline.getBoundingClientRect(),i=t.clientX-e.left>e.width/2?t.clientX-e.left-120:t.clientX-e.left+15,r=t.clientY-e.top>e.height/2?t.clientY-e.top-35:t.clientY-e.top+15,s=Math.round((t.clientX-this.polyline.getBoundingClientRect().left)*this.coef),n=this.curve.getPrice(s||1);n>1e10&&(n/=1e18),this.textM.setAttributeNS(null,"x",i.toString()),this.textM.setAttributeNS(null,"y",r.toString()),this.textMDots.setAttributeNS(null,"x",i.toString()),this.textMPrice.setAttributeNS(null,"x",i.toString()),this.textMDots.textContent="Dot: "+s,this.textMPrice.textContent="Price: "+n;var o=this.textM.getBoundingClientRect();this.infoText.setAttributeNS(null,"x",(i-5).toString()),this.infoText.setAttributeNS(null,"y",(r-5).toString()),this.infoText.setAttributeNS(null,"width",(o.width+10).toString()),this.infoText.setAttributeNS(null,"height",(o.height+10).toString())}},t.prototype.onMouseOut=function(){this.infoText.style.visibility="hidden",this.textM.style.visibility="hidden"},t.prototype.getFilter=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","filter");i.setAttributeNS(null,"x","-40%"),i.setAttributeNS(null,"y","-40%"),i.setAttributeNS(null,"width","200%"),i.setAttributeNS(null,"height","200%"),i.setAttributeNS(null,"id",t);var r=document.createElementNS("http://www.w3.org/2000/svg","feOffset");r.setAttributeNS(null,"result","offOut"),r.setAttributeNS(null,"in",this.black?"SourceAlpha":"SourceGraphic"),r.setAttributeNS(null,"dx",e.x),r.setAttributeNS(null,"dy",e.y);var s=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");s.setAttributeNS(null,"result","blurOut"),s.setAttributeNS(null,"in","offOut"),s.setAttributeNS(null,"stdDeviation",this.shadowRadius);var n=document.createElementNS("http://www.w3.org/2000/svg","feBlend");return n.setAttributeNS(null,"in","SourceGraphic"),n.setAttributeNS(null,"in2","blurOut"),n.setAttributeNS(null,"mode","normal"),i.appendChild(r),i.appendChild(s),i.appendChild(n),i},t.prototype.getDataset=function(t,e){void 0===e&&(e=0);var i=this.options.height/2,n=new r.Curve(t),o=s.reduce(n.max,this.maxDots),l=0,u=1;o.forEach(function(t,i,r){r[i-1]&&r[i-1]<e&&t>=e&&(u=t);var s=n.getPrice(t);s>l&&(l=s)});var h=l/i,c=this.maxDots/n.max,a={x:u*c,y:i-n.getPrice(u)/h},d=[],p=["0,"+l/h];return o.forEach(function(t){d.push(t*c+","+(i-n.getPrice(t)/h)),p.push(t*c+","+(i-n.getPrice(t)/h))}),p.push(this.maxDots+","+l/h),{polyline:d.join(" "),fill:p.join(" "),currentPos:a,maxY:l,maxX:n.max,dotsIssued:e,curve:n}},t}();e.CurveSvgLineChart=n},,,function(t,e,i){t.exports=i(7)}])});